require 'spec_helper'
require 'parslet/rig/rspec'

module MARC
  module Spec
    describe <%= ":#{rule}" %> do
      let(:parser) { Parser.new }
      let(:reporter) { Parslet::ErrorReporter::Deepest.new }

      describe <%= spec.description %> do <% spec.tests.each do |test| %>
        it <%= test.description %> do
          expect(<%= "parser.#{spec.parse_method}" %>).<%= test.valid ? 'to' : 'not_to' %> parse(<%= test.data %>, trace: true)
        end<% end %>
      end
    end
  end
end
